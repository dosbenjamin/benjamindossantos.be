---
import type { Strapi } from 'types/strapi'
import { cloudinary } from 'cloudinary'
import Resize from '@cloudinary/url-gen/actions/resize'

type Props = {
  icon: Strapi.Image
}

const { icon } = Astro.props as Props

const { provider_metadata, mime, url: favicon_url } = icon
const favicon = cloudinary.image(provider_metadata.public_id)
---
<link rel="icon" href={favicon.resize(Resize.thumbnail(32, 32)).format('ico').toURL()} sizes="any">
{mime === 'image/svg+xml' && <link rel="icon" href={favicon_url} type="image/svg+xml">}
<link rel="apple-touch-icon" href={favicon.resize(Resize.thumbnail(180, 180)).format('png').toURL()} sizes="180x180">
<link rel="manifest" href="/manifest.webmanifest">
